2025-02-07 10:58:16,763 DEBUG    root            Loaded Command Group: ['gcloud', 'builds']
2025-02-07 10:58:16,944 DEBUG    root            Loaded Command Group: ['gcloud', 'builds', 'submit']
2025-02-07 10:58:16,956 DEBUG    root            Running [gcloud.builds.submit] with arguments: [--async: "True", --config: "./cloudbuild.yaml", --gcs-source-staging-dir: "gs://dde-ops-data-science-p001_cloudbuild/dds-mlflow-gcp-auth", --impersonate-service-account: "cloudbuild-sa@dde-ops-data-science-p001.iam.gserviceaccount.com", --project: "dde-ops-data-science-p001", --region: "europe-west4", SOURCE: "."]
2025-02-07 10:58:16,963 WARNING  root            This command is using service account impersonation. All API calls will be executed as [cloudbuild-sa@dde-ops-data-science-p001.iam.gserviceaccount.com].
2025-02-07 10:58:16,976 DEBUG    google.auth.transport.requests Making request: POST https://oauth2.googleapis.com/token
2025-02-07 10:58:16,987 DEBUG    urllib3.connectionpool Starting new HTTPS connection (1): oauth2.googleapis.com:443
2025-02-07 10:58:17,090 DEBUG    urllib3.connectionpool https://oauth2.googleapis.com:443 "POST /token HTTP/1.1" 200 None
2025-02-07 10:58:17,099 DEBUG    google.auth.transport.requests Making request: POST https://iamcredentials.googleapis.com/v1/projects/-/serviceAccounts/cloudbuild-sa@dde-ops-data-science-p001.iam.gserviceaccount.com:generateAccessToken
2025-02-07 10:58:17,100 DEBUG    urllib3.connectionpool Starting new HTTPS connection (1): iamcredentials.googleapis.com:443
2025-02-07 10:58:17,219 DEBUG    urllib3.connectionpool https://iamcredentials.googleapis.com:443 "POST /v1/projects/-/serviceAccounts/cloudbuild-sa@dde-ops-data-science-p001.iam.gserviceaccount.com:generateAccessToken HTTP/1.1" 200 None
2025-02-07 10:58:17,221 WARNING  root            This command is using service account impersonation. All API calls will be executed as [cloudbuild-sa@dde-ops-data-science-p001.iam.gserviceaccount.com].
2025-02-07 10:58:17,228 DEBUG    google.auth.transport.requests Making request: POST https://oauth2.googleapis.com/token
2025-02-07 10:58:17,229 DEBUG    urllib3.connectionpool Starting new HTTPS connection (1): oauth2.googleapis.com:443
2025-02-07 10:58:17,323 DEBUG    urllib3.connectionpool https://oauth2.googleapis.com:443 "POST /token HTTP/1.1" 200 None
2025-02-07 10:58:17,325 DEBUG    google.auth.transport.requests Making request: POST https://iamcredentials.googleapis.com/v1/projects/-/serviceAccounts/cloudbuild-sa@dde-ops-data-science-p001.iam.gserviceaccount.com:generateAccessToken
2025-02-07 10:58:17,326 DEBUG    urllib3.connectionpool Starting new HTTPS connection (1): iamcredentials.googleapis.com:443
2025-02-07 10:58:17,443 DEBUG    urllib3.connectionpool https://iamcredentials.googleapis.com:443 "POST /v1/projects/-/serviceAccounts/cloudbuild-sa@dde-ops-data-science-p001.iam.gserviceaccount.com:generateAccessToken HTTP/1.1" 200 None
2025-02-07 10:58:17,472 DEBUG    urllib3.connectionpool Starting new HTTPS connection (1): storage.googleapis.com:443
2025-02-07 10:58:19,632 DEBUG    urllib3.connectionpool https://storage.googleapis.com:443 "GET /storage/v1/b/dde-ops-data-science-p001_cloudbuild?alt=json HTTP/1.1" 200 1187
2025-02-07 10:58:19,637 INFO     root            Using default gcloudignore file:
--------------------------------------------------
# This file specifies files that are *not* uploaded to Google Cloud
# using gcloud. It follows the same syntax as .gitignore, with the addition of
# "#!include" directives (which insert the entries of the given .gitignore-style
# file at that point).
#
# For more information, run:
#   $ gcloud topic gcloudignore
#
.gcloudignore
# If you would like to upload your .git directory, .gitignore file or files
# from your .gitignore file, remove the corresponding line
# below:
.git
.gitignore
#!include:.gitignore

--------------------------------------------------
2025-02-07 10:58:19,659 DEBUG    root            Skipping file [.DS_Store]
2025-02-07 10:58:19,662 DEBUG    root            Skipping file [.gitignore]
2025-02-07 10:58:19,666 DEBUG    root            Skipping file [.pytest_cache]
2025-02-07 10:58:19,668 DEBUG    root            Skipping file [.venv]
2025-02-07 10:58:19,669 DEBUG    root            Skipping file [.git]
2025-02-07 10:58:19,676 DEBUG    root            Skipping file [tests/__pycache__/test_mlflow_gcp_auth.cpython-310-pytest-8.2.2.pyc]
2025-02-07 10:58:19,677 DEBUG    root            Skipping file [tests/__pycache__/__init__.cpython-310.pyc]
2025-02-07 10:58:19,679 DEBUG    root            Skipping file [__pycache__/test.cpython-310.pyc]
2025-02-07 10:58:19,684 DEBUG    root            Skipping file [mlflow_gcp_auth/__pycache__/mlflow_gcp_auth.cpython-310.pyc]
2025-02-07 10:58:19,685 DEBUG    root            Skipping file [mlflow_gcp_auth/__pycache__/__init__.cpython-310.pyc]
2025-02-07 10:58:19,685 INFO     ___FILE_ONLY___ Creating temporary archive of 10 file(s) totalling 227.0 KiB before compression.

2025-02-07 10:58:19,688 DEBUG    root            Added dir [tests]
2025-02-07 10:58:19,688 DEBUG    root            Added dir [__pycache__]
2025-02-07 10:58:19,688 DEBUG    root            Added dir [mlflow_gcp_auth]
2025-02-07 10:58:19,688 DEBUG    root            Added dir [tests/__pycache__]
2025-02-07 10:58:19,688 DEBUG    root            Added dir [mlflow_gcp_auth/__pycache__]
2025-02-07 10:58:19,689 DEBUG    root            Added [cloudbuild.yaml]
2025-02-07 10:58:19,692 DEBUG    root            Added [pyproject.toml]
2025-02-07 10:58:19,693 DEBUG    root            Added [build_ci.sh]
2025-02-07 10:58:19,694 DEBUG    root            Added [README.md]
2025-02-07 10:58:19,695 DEBUG    root            Added [deploy.sh]
2025-02-07 10:58:19,704 DEBUG    root            Added [poetry.lock]
2025-02-07 10:58:19,706 DEBUG    root            Added [tests/__init__.py]
2025-02-07 10:58:19,707 DEBUG    root            Added [tests/test_mlflow_gcp_auth.py]
2025-02-07 10:58:19,707 DEBUG    root            Added [mlflow_gcp_auth/__init__.py]
2025-02-07 10:58:19,708 DEBUG    root            Added [mlflow_gcp_auth/mlflow_gcp_auth.py]
2025-02-07 10:58:19,709 INFO     ___FILE_ONLY___ Some files were not included in the source upload.

Check the gcloud log [/Users/daniel.low/.config/gcloud/logs/2025.02.07/10.58.16.709058.log] to see which files and the contents of the
default gcloudignore file used (see `$ gcloud topic gcloudignore` to learn
more).


2025-02-07 10:58:19,709 INFO     ___FILE_ONLY___ Uploading tarball of [.] to [gs://dde-ops-data-science-p001_cloudbuild/dds-mlflow-gcp-auth/1738897097.464668-9451a9ad3dc34858b6f1f180ff974d5f.tgz]

2025-02-07 10:58:19,715 INFO     root            Uploading [/var/folders/cs/p5_dzp410hlgfg_ljwj0jyg00000gp/T/tmp7ss6x7we/file.tgz] to [dde-ops-data-science-p001_cloudbuild/dds-mlflow-gcp-auth/1738897097.464668-9451a9ad3dc34858b6f1f180ff974d5f.tgz]
2025-02-07 10:58:19,719 DEBUG    urllib3.connectionpool Starting new HTTPS connection (1): storage.googleapis.com:443
2025-02-07 10:58:20,552 DEBUG    urllib3.connectionpool https://storage.googleapis.com:443 "POST /upload/storage/v1/b/dde-ops-data-science-p001_cloudbuild/o?alt=json&name=dds-mlflow-gcp-auth%2F1738897097.464668-9451a9ad3dc34858b6f1f180ff974d5f.tgz&uploadType=multipart HTTP/1.1" 200 1142
2025-02-07 10:58:20,564 DEBUG    root            submitting build: <Build
 images: []
 logsBucket: 'gs://${PROJECT_ID}_cloudbuild/$_IMAGE_NAME'
 options: <BuildOptions
 dynamicSubstitutions: True
 env: []
 logging: LoggingValueValuesEnum(GCS_ONLY, 2)
 secretEnv: []
 sourceProvenanceHash: []
 volumes: []>
 secrets: []
 source: <Source
 storageSource: <StorageSource
 bucket: 'dde-ops-data-science-p001_cloudbuild'
 generation: 1738897100392081
 object: 'dds-mlflow-gcp-auth/1738897097.464668-9451a9ad3dc34858b6f1f180ff974d5f.tgz'>>
 steps: [<BuildStep
 allowExitCodes: []
 args: ['-c', 'pip install poetry\npoetry install \npoetry run ruff check . --config pyproject.toml\npoetry run ruff format . --check --config pyproject.toml\npoetry run pytest tests\n']
 entrypoint: 'bash'
 env: []
 id: 'InternalCheck'
 name: 'python:3.10.13-slim'
 secretEnv: []
 volumes: []
 waitFor: []>, <BuildStep
 allowExitCodes: []
 args: ['-c', 'pip install poetry \npoetry self add keyrings.google-artifactregistry-auth\npoetry config repositories.dds ${_ARTIFACT_REGISTRY_URL}\nif [[ ${_UPLOAD_FLAG} == \'True\' ]]; then\n  echo "--- Dry-Run ---"\n  if poetry publish --build --repository dds --dry-run; then\n      echo "---- Push to Repo ----"\n      poetry publish --repository dds\n  else\n      echo "Failed to publish to repository"\n  fi\nelse\n  echo "Did not publish as the cloud build was not triggered on main branch."\nfi\n']
 entrypoint: 'bash'
 env: []
 id: 'PublishPackage'
 name: 'python:3.10.13-slim'
 secretEnv: []
 volumes: []
 waitFor: []>]
 substitutions: <SubstitutionsValue
 additionalProperties: [<AdditionalProperty
 key: '_ARTIFACT_REGISTRY_URL'
 value: 'https://${LOCATION}-python.pkg.dev/${PROJECT_ID}/python'>, <AdditionalProperty
 key: '_IMAGE_NAME'
 value: 'mlflow-gcp-auth'>, <AdditionalProperty
 key: '_UPLOAD_FLAG'
 value: 'True'>]>
 tags: []
 warnings: []>
2025-02-07 10:58:20,566 WARNING  root            This command is using service account impersonation. All API calls will be executed as [cloudbuild-sa@dde-ops-data-science-p001.iam.gserviceaccount.com].
2025-02-07 10:58:20,578 DEBUG    google.auth.transport.requests Making request: POST https://oauth2.googleapis.com/token
2025-02-07 10:58:20,579 DEBUG    urllib3.connectionpool Starting new HTTPS connection (1): oauth2.googleapis.com:443
2025-02-07 10:58:20,676 DEBUG    urllib3.connectionpool https://oauth2.googleapis.com:443 "POST /token HTTP/1.1" 200 None
2025-02-07 10:58:20,680 DEBUG    google.auth.transport.requests Making request: POST https://iamcredentials.googleapis.com/v1/projects/-/serviceAccounts/cloudbuild-sa@dde-ops-data-science-p001.iam.gserviceaccount.com:generateAccessToken
2025-02-07 10:58:20,682 DEBUG    urllib3.connectionpool Starting new HTTPS connection (1): iamcredentials.googleapis.com:443
2025-02-07 10:58:20,787 DEBUG    urllib3.connectionpool https://iamcredentials.googleapis.com:443 "POST /v1/projects/-/serviceAccounts/cloudbuild-sa@dde-ops-data-science-p001.iam.gserviceaccount.com:generateAccessToken HTTP/1.1" 200 None
2025-02-07 10:58:20,792 WARNING  root            This command is using service account impersonation. All API calls will be executed as [cloudbuild-sa@dde-ops-data-science-p001.iam.gserviceaccount.com].
2025-02-07 10:58:20,796 DEBUG    google.auth.transport.requests Making request: POST https://oauth2.googleapis.com/token
2025-02-07 10:58:20,797 DEBUG    urllib3.connectionpool Starting new HTTPS connection (1): oauth2.googleapis.com:443
2025-02-07 10:58:20,888 DEBUG    urllib3.connectionpool https://oauth2.googleapis.com:443 "POST /token HTTP/1.1" 200 None
2025-02-07 10:58:20,892 DEBUG    google.auth.transport.requests Making request: POST https://iamcredentials.googleapis.com/v1/projects/-/serviceAccounts/cloudbuild-sa@dde-ops-data-science-p001.iam.gserviceaccount.com:generateAccessToken
2025-02-07 10:58:20,893 DEBUG    urllib3.connectionpool Starting new HTTPS connection (1): iamcredentials.googleapis.com:443
2025-02-07 10:58:21,015 DEBUG    urllib3.connectionpool https://iamcredentials.googleapis.com:443 "POST /v1/projects/-/serviceAccounts/cloudbuild-sa@dde-ops-data-science-p001.iam.gserviceaccount.com:generateAccessToken HTTP/1.1" 200 None
2025-02-07 10:58:21,027 DEBUG    urllib3.connectionpool Starting new HTTPS connection (1): cloudbuild.googleapis.com:443
2025-02-07 10:58:23,214 DEBUG    urllib3.connectionpool https://cloudbuild.googleapis.com:443 "POST /v1/projects/dde-ops-data-science-p001/locations/europe-west4/builds?alt=json HTTP/1.1" 200 None
2025-02-07 10:58:23,225 INFO     ___FILE_ONLY___ Created [https://cloudbuild.googleapis.com/v1/projects/dde-ops-data-science-p001/locations/europe-west4/builds/f8032628-7d0a-4d1a-bab6-844e6d313035].

2025-02-07 10:58:23,226 INFO     ___FILE_ONLY___ Logs are available at [ https://console.cloud.google.com/cloud-build/builds;region=europe-west4/f8032628-7d0a-4d1a-bab6-844e6d313035?project=699197215593 ].

2025-02-07 10:58:23,226 DEBUG    root            Chosen display Format:
        table(
          id,
          createTime.date('%Y-%m-%dT%H:%M:%S%Oz', undefined='-'),
          duration(start=startTime,end=finishTime,precision=0,calendar=false,undefined="  -").slice(2:).join(""):label=DURATION,
          build_source(undefined="-"):label=SOURCE,
          build_images(undefined="-"):label=IMAGES,
          status
        )
      
2025-02-07 10:58:23,227 INFO     root            Display format: "
        table(
          id,
          createTime.date('%Y-%m-%dT%H:%M:%S%Oz', undefined='-'),
          duration(start=startTime,end=finishTime,precision=0,calendar=false,undefined="  -").slice(2:).join(""):label=DURATION,
          build_source(undefined="-"):label=SOURCE,
          build_images(undefined="-"):label=IMAGES,
          status
        )
      "
2025-02-07 10:58:23,273 INFO     ___FILE_ONLY___ ID
2025-02-07 10:58:23,273 INFO     ___FILE_ONLY___                                     
2025-02-07 10:58:23,273 INFO     ___FILE_ONLY___ CREATE_TIME
2025-02-07 10:58:23,273 INFO     ___FILE_ONLY___                 
2025-02-07 10:58:23,273 INFO     ___FILE_ONLY___ DURATION
2025-02-07 10:58:23,273 INFO     ___FILE_ONLY___   
2025-02-07 10:58:23,273 INFO     ___FILE_ONLY___ SOURCE
2025-02-07 10:58:23,274 INFO     ___FILE_ONLY___                                                                                                                 
2025-02-07 10:58:23,274 INFO     ___FILE_ONLY___ IMAGES
2025-02-07 10:58:23,274 INFO     ___FILE_ONLY___   
2025-02-07 10:58:23,274 INFO     ___FILE_ONLY___ STATUS
2025-02-07 10:58:23,274 INFO     ___FILE_ONLY___ 

2025-02-07 10:58:23,274 INFO     ___FILE_ONLY___ f8032628-7d0a-4d1a-bab6-844e6d313035
2025-02-07 10:58:23,274 INFO     ___FILE_ONLY___   
2025-02-07 10:58:23,274 INFO     ___FILE_ONLY___ 2025-02-07T02:58:22+00:00
2025-02-07 10:58:23,274 INFO     ___FILE_ONLY___   
2025-02-07 10:58:23,274 INFO     ___FILE_ONLY___ -
2025-02-07 10:58:23,274 INFO     ___FILE_ONLY___          
2025-02-07 10:58:23,274 INFO     ___FILE_ONLY___ gs://dde-ops-data-science-p001_cloudbuild/dds-mlflow-gcp-auth/1738897097.464668-9451a9ad3dc34858b6f1f180ff974d5f.tgz
2025-02-07 10:58:23,274 INFO     ___FILE_ONLY___   
2025-02-07 10:58:23,274 INFO     ___FILE_ONLY___ -
2025-02-07 10:58:23,274 INFO     ___FILE_ONLY___        
2025-02-07 10:58:23,274 INFO     ___FILE_ONLY___ QUEUED
2025-02-07 10:58:23,274 INFO     ___FILE_ONLY___ 

2025-02-07 10:58:23,291 DEBUG    root            Metrics reporting process started...
