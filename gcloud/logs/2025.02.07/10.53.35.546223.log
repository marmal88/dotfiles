2025-02-07 10:53:35,609 DEBUG    root            Loaded Command Group: ['gcloud', 'builds']
2025-02-07 10:53:35,661 DEBUG    root            Loaded Command Group: ['gcloud', 'builds', 'submit']
2025-02-07 10:53:35,672 DEBUG    root            Running [gcloud.builds.submit] with arguments: [--async: "True", --config: "./cloudbuild.yaml", --gcs-source-staging-dir: "gs://dde-ops-data-science-p001_cloudbuild/dds-mlflow-gcp-auth", --impersonate-service-account: "cloudbuild-sa@dde-ops-data-science-p001.iam.gserviceaccount.com", --project: "dde-ops-data-science-p001", --region: "europe-west4", SOURCE: "."]
2025-02-07 10:53:35,677 WARNING  root            This command is using service account impersonation. All API calls will be executed as [cloudbuild-sa@dde-ops-data-science-p001.iam.gserviceaccount.com].
2025-02-07 10:53:35,688 DEBUG    google.auth.transport.requests Making request: POST https://oauth2.googleapis.com/token
2025-02-07 10:53:35,693 DEBUG    urllib3.connectionpool Starting new HTTPS connection (1): oauth2.googleapis.com:443
2025-02-07 10:53:35,790 DEBUG    urllib3.connectionpool https://oauth2.googleapis.com:443 "POST /token HTTP/1.1" 200 None
2025-02-07 10:53:35,792 DEBUG    google.auth.transport.requests Making request: POST https://iamcredentials.googleapis.com/v1/projects/-/serviceAccounts/cloudbuild-sa@dde-ops-data-science-p001.iam.gserviceaccount.com:generateAccessToken
2025-02-07 10:53:35,793 DEBUG    urllib3.connectionpool Starting new HTTPS connection (1): iamcredentials.googleapis.com:443
2025-02-07 10:53:35,911 DEBUG    urllib3.connectionpool https://iamcredentials.googleapis.com:443 "POST /v1/projects/-/serviceAccounts/cloudbuild-sa@dde-ops-data-science-p001.iam.gserviceaccount.com:generateAccessToken HTTP/1.1" 200 None
2025-02-07 10:53:35,915 WARNING  root            This command is using service account impersonation. All API calls will be executed as [cloudbuild-sa@dde-ops-data-science-p001.iam.gserviceaccount.com].
2025-02-07 10:53:35,918 DEBUG    google.auth.transport.requests Making request: POST https://oauth2.googleapis.com/token
2025-02-07 10:53:35,919 DEBUG    urllib3.connectionpool Starting new HTTPS connection (1): oauth2.googleapis.com:443
2025-02-07 10:53:36,017 DEBUG    urllib3.connectionpool https://oauth2.googleapis.com:443 "POST /token HTTP/1.1" 200 None
2025-02-07 10:53:36,020 DEBUG    google.auth.transport.requests Making request: POST https://iamcredentials.googleapis.com/v1/projects/-/serviceAccounts/cloudbuild-sa@dde-ops-data-science-p001.iam.gserviceaccount.com:generateAccessToken
2025-02-07 10:53:36,021 DEBUG    urllib3.connectionpool Starting new HTTPS connection (1): iamcredentials.googleapis.com:443
2025-02-07 10:53:36,127 DEBUG    urllib3.connectionpool https://iamcredentials.googleapis.com:443 "POST /v1/projects/-/serviceAccounts/cloudbuild-sa@dde-ops-data-science-p001.iam.gserviceaccount.com:generateAccessToken HTTP/1.1" 200 None
2025-02-07 10:53:36,176 DEBUG    urllib3.connectionpool Starting new HTTPS connection (1): storage.googleapis.com:443
2025-02-07 10:53:36,561 DEBUG    urllib3.connectionpool https://storage.googleapis.com:443 "GET /storage/v1/b/dde-ops-data-science-p001_cloudbuild?alt=json HTTP/1.1" 200 1187
2025-02-07 10:53:36,564 INFO     root            Using default gcloudignore file:
--------------------------------------------------
# This file specifies files that are *not* uploaded to Google Cloud
# using gcloud. It follows the same syntax as .gitignore, with the addition of
# "#!include" directives (which insert the entries of the given .gitignore-style
# file at that point).
#
# For more information, run:
#   $ gcloud topic gcloudignore
#
.gcloudignore
# If you would like to upload your .git directory, .gitignore file or files
# from your .gitignore file, remove the corresponding line
# below:
.git
.gitignore
#!include:.gitignore

--------------------------------------------------
2025-02-07 10:53:36,568 DEBUG    root            Skipping file [.DS_Store]
2025-02-07 10:53:36,569 DEBUG    root            Skipping file [.gitignore]
2025-02-07 10:53:36,571 DEBUG    root            Skipping file [.pytest_cache]
2025-02-07 10:53:36,571 DEBUG    root            Skipping file [.venv]
2025-02-07 10:53:36,572 DEBUG    root            Skipping file [.git]
2025-02-07 10:53:36,576 DEBUG    root            Skipping file [tests/__pycache__/test_mlflow_gcp_auth.cpython-310-pytest-8.2.2.pyc]
2025-02-07 10:53:36,577 DEBUG    root            Skipping file [tests/__pycache__/__init__.cpython-310.pyc]
2025-02-07 10:53:36,578 DEBUG    root            Skipping file [__pycache__/test.cpython-310.pyc]
2025-02-07 10:53:36,581 DEBUG    root            Skipping file [mlflow_gcp_auth/__pycache__/mlflow_gcp_auth.cpython-310.pyc]
2025-02-07 10:53:36,581 DEBUG    root            Skipping file [mlflow_gcp_auth/__pycache__/__init__.cpython-310.pyc]
2025-02-07 10:53:36,581 INFO     ___FILE_ONLY___ Creating temporary archive of 10 file(s) totalling 182.4 KiB before compression.

2025-02-07 10:53:36,583 DEBUG    root            Added dir [tests]
2025-02-07 10:53:36,583 DEBUG    root            Added dir [__pycache__]
2025-02-07 10:53:36,584 DEBUG    root            Added dir [mlflow_gcp_auth]
2025-02-07 10:53:36,584 DEBUG    root            Added dir [tests/__pycache__]
2025-02-07 10:53:36,584 DEBUG    root            Added dir [mlflow_gcp_auth/__pycache__]
2025-02-07 10:53:36,584 DEBUG    root            Added [cloudbuild.yaml]
2025-02-07 10:53:36,586 DEBUG    root            Added [pyproject.toml]
2025-02-07 10:53:36,586 DEBUG    root            Added [build_ci.sh]
2025-02-07 10:53:36,588 DEBUG    root            Added [README.md]
2025-02-07 10:53:36,592 DEBUG    root            Added [deploy.sh]
2025-02-07 10:53:36,596 DEBUG    root            Added [poetry.lock]
2025-02-07 10:53:36,597 DEBUG    root            Added [tests/__init__.py]
2025-02-07 10:53:36,606 DEBUG    root            Added [tests/test_mlflow_gcp_auth.py]
2025-02-07 10:53:36,607 DEBUG    root            Added [mlflow_gcp_auth/__init__.py]
2025-02-07 10:53:36,610 DEBUG    root            Added [mlflow_gcp_auth/mlflow_gcp_auth.py]
2025-02-07 10:53:36,610 INFO     ___FILE_ONLY___ Some files were not included in the source upload.

Check the gcloud log [/Users/daniel.low/.config/gcloud/logs/2025.02.07/10.53.35.546223.log] to see which files and the contents of the
default gcloudignore file used (see `$ gcloud topic gcloudignore` to learn
more).


2025-02-07 10:53:36,610 INFO     ___FILE_ONLY___ Uploading tarball of [.] to [gs://dde-ops-data-science-p001_cloudbuild/dds-mlflow-gcp-auth/1738896816.160819-37de5650be6240cc9f6d28a427357686.tgz]

2025-02-07 10:53:36,615 INFO     root            Uploading [/var/folders/cs/p5_dzp410hlgfg_ljwj0jyg00000gp/T/tmpievlqe1k/file.tgz] to [dde-ops-data-science-p001_cloudbuild/dds-mlflow-gcp-auth/1738896816.160819-37de5650be6240cc9f6d28a427357686.tgz]
2025-02-07 10:53:36,617 DEBUG    urllib3.connectionpool Starting new HTTPS connection (1): storage.googleapis.com:443
2025-02-07 10:53:39,159 DEBUG    urllib3.connectionpool https://storage.googleapis.com:443 "POST /upload/storage/v1/b/dde-ops-data-science-p001_cloudbuild/o?alt=json&name=dds-mlflow-gcp-auth%2F1738896816.160819-37de5650be6240cc9f6d28a427357686.tgz&uploadType=multipart HTTP/1.1" 200 1142
2025-02-07 10:53:39,173 DEBUG    root            submitting build: <Build
 images: []
 logsBucket: 'gs://${PROJECT_ID}_cloudbuild/$_IMAGE_NAME'
 options: <BuildOptions
 dynamicSubstitutions: True
 env: []
 logging: LoggingValueValuesEnum(GCS_ONLY, 2)
 secretEnv: []
 sourceProvenanceHash: []
 volumes: []>
 secrets: []
 source: <Source
 storageSource: <StorageSource
 bucket: 'dde-ops-data-science-p001_cloudbuild'
 generation: 1738896818975886
 object: 'dds-mlflow-gcp-auth/1738896816.160819-37de5650be6240cc9f6d28a427357686.tgz'>>
 steps: [<BuildStep
 allowExitCodes: []
 args: ['-c', 'pip install poetry\npoetry install \npoetry run ruff check . --config pyproject.toml\npoetry run ruff format . --check --config pyproject.toml\npoetry run pytest tests\n']
 entrypoint: 'bash'
 env: []
 id: 'InternalCheck'
 name: 'python:3.10.13-slim'
 secretEnv: []
 volumes: []
 waitFor: []>, <BuildStep
 allowExitCodes: []
 args: ['-c', 'pip install poetry \npoetry self add keyrings.google-artifactregistry-auth\npoetry config repositories.dds ${_ARTIFACT_REGISTRY_URL}\nif [[ ${_UPLOAD_FLAG} == \'True\' ]]; then\n  echo "--- Dry-Run ---"\n  if poetry publish --build --repository dds --dry-run; then\n      echo "---- Push to Repo ----"\n      poetry publish --repository dds\n  else\n      echo "Failed to publish to repository"\n  fi\nelse\n  echo "Did not publish as the cloud build was not triggered on main branch."\nfi\n']
 entrypoint: 'bash'
 env: []
 id: 'PublishPackage'
 name: 'python:3.10.13-slim'
 secretEnv: []
 volumes: []
 waitFor: []>]
 substitutions: <SubstitutionsValue
 additionalProperties: [<AdditionalProperty
 key: '_ARTIFACT_REGISTRY_URL'
 value: 'https://${LOCATION}-python.pkg.dev/${PROJECT_ID}/python'>, <AdditionalProperty
 key: '_IMAGE_NAME'
 value: 'mlflow-gcp-auth'>, <AdditionalProperty
 key: '_UPLOAD_FLAG'
 value: 'True'>]>
 tags: []
 warnings: []>
2025-02-07 10:53:39,176 WARNING  root            This command is using service account impersonation. All API calls will be executed as [cloudbuild-sa@dde-ops-data-science-p001.iam.gserviceaccount.com].
2025-02-07 10:53:39,181 DEBUG    google.auth.transport.requests Making request: POST https://oauth2.googleapis.com/token
2025-02-07 10:53:39,183 DEBUG    urllib3.connectionpool Starting new HTTPS connection (1): oauth2.googleapis.com:443
2025-02-07 10:53:39,277 DEBUG    urllib3.connectionpool https://oauth2.googleapis.com:443 "POST /token HTTP/1.1" 200 None
2025-02-07 10:53:39,281 DEBUG    google.auth.transport.requests Making request: POST https://iamcredentials.googleapis.com/v1/projects/-/serviceAccounts/cloudbuild-sa@dde-ops-data-science-p001.iam.gserviceaccount.com:generateAccessToken
2025-02-07 10:53:39,283 DEBUG    urllib3.connectionpool Starting new HTTPS connection (1): iamcredentials.googleapis.com:443
2025-02-07 10:53:39,400 DEBUG    urllib3.connectionpool https://iamcredentials.googleapis.com:443 "POST /v1/projects/-/serviceAccounts/cloudbuild-sa@dde-ops-data-science-p001.iam.gserviceaccount.com:generateAccessToken HTTP/1.1" 200 None
2025-02-07 10:53:39,406 WARNING  root            This command is using service account impersonation. All API calls will be executed as [cloudbuild-sa@dde-ops-data-science-p001.iam.gserviceaccount.com].
2025-02-07 10:53:39,431 DEBUG    google.auth.transport.requests Making request: POST https://oauth2.googleapis.com/token
2025-02-07 10:53:39,432 DEBUG    urllib3.connectionpool Starting new HTTPS connection (1): oauth2.googleapis.com:443
2025-02-07 10:53:39,514 DEBUG    urllib3.connectionpool https://oauth2.googleapis.com:443 "POST /token HTTP/1.1" 200 None
2025-02-07 10:53:39,517 DEBUG    google.auth.transport.requests Making request: POST https://iamcredentials.googleapis.com/v1/projects/-/serviceAccounts/cloudbuild-sa@dde-ops-data-science-p001.iam.gserviceaccount.com:generateAccessToken
2025-02-07 10:53:39,518 DEBUG    urllib3.connectionpool Starting new HTTPS connection (1): iamcredentials.googleapis.com:443
2025-02-07 10:53:39,633 DEBUG    urllib3.connectionpool https://iamcredentials.googleapis.com:443 "POST /v1/projects/-/serviceAccounts/cloudbuild-sa@dde-ops-data-science-p001.iam.gserviceaccount.com:generateAccessToken HTTP/1.1" 200 None
2025-02-07 10:53:39,639 DEBUG    urllib3.connectionpool Starting new HTTPS connection (1): cloudbuild.googleapis.com:443
2025-02-07 10:53:40,738 DEBUG    urllib3.connectionpool https://cloudbuild.googleapis.com:443 "POST /v1/projects/dde-ops-data-science-p001/locations/europe-west4/builds?alt=json HTTP/1.1" 200 None
2025-02-07 10:53:40,751 INFO     ___FILE_ONLY___ Created [https://cloudbuild.googleapis.com/v1/projects/dde-ops-data-science-p001/locations/europe-west4/builds/91508534-970e-4429-8864-6cb0f3645f50].

2025-02-07 10:53:40,751 INFO     ___FILE_ONLY___ Logs are available at [ https://console.cloud.google.com/cloud-build/builds;region=europe-west4/91508534-970e-4429-8864-6cb0f3645f50?project=699197215593 ].

2025-02-07 10:53:40,751 DEBUG    root            Chosen display Format:
        table(
          id,
          createTime.date('%Y-%m-%dT%H:%M:%S%Oz', undefined='-'),
          duration(start=startTime,end=finishTime,precision=0,calendar=false,undefined="  -").slice(2:).join(""):label=DURATION,
          build_source(undefined="-"):label=SOURCE,
          build_images(undefined="-"):label=IMAGES,
          status
        )
      
2025-02-07 10:53:40,752 INFO     root            Display format: "
        table(
          id,
          createTime.date('%Y-%m-%dT%H:%M:%S%Oz', undefined='-'),
          duration(start=startTime,end=finishTime,precision=0,calendar=false,undefined="  -").slice(2:).join(""):label=DURATION,
          build_source(undefined="-"):label=SOURCE,
          build_images(undefined="-"):label=IMAGES,
          status
        )
      "
2025-02-07 10:53:40,792 INFO     ___FILE_ONLY___ ID
2025-02-07 10:53:40,792 INFO     ___FILE_ONLY___                                     
2025-02-07 10:53:40,792 INFO     ___FILE_ONLY___ CREATE_TIME
2025-02-07 10:53:40,792 INFO     ___FILE_ONLY___                 
2025-02-07 10:53:40,792 INFO     ___FILE_ONLY___ DURATION
2025-02-07 10:53:40,792 INFO     ___FILE_ONLY___   
2025-02-07 10:53:40,792 INFO     ___FILE_ONLY___ SOURCE
2025-02-07 10:53:40,792 INFO     ___FILE_ONLY___                                                                                                                 
2025-02-07 10:53:40,792 INFO     ___FILE_ONLY___ IMAGES
2025-02-07 10:53:40,792 INFO     ___FILE_ONLY___   
2025-02-07 10:53:40,792 INFO     ___FILE_ONLY___ STATUS
2025-02-07 10:53:40,792 INFO     ___FILE_ONLY___ 

2025-02-07 10:53:40,792 INFO     ___FILE_ONLY___ 91508534-970e-4429-8864-6cb0f3645f50
2025-02-07 10:53:40,792 INFO     ___FILE_ONLY___   
2025-02-07 10:53:40,793 INFO     ___FILE_ONLY___ 2025-02-07T02:53:40+00:00
2025-02-07 10:53:40,793 INFO     ___FILE_ONLY___   
2025-02-07 10:53:40,793 INFO     ___FILE_ONLY___ -
2025-02-07 10:53:40,793 INFO     ___FILE_ONLY___          
2025-02-07 10:53:40,793 INFO     ___FILE_ONLY___ gs://dde-ops-data-science-p001_cloudbuild/dds-mlflow-gcp-auth/1738896816.160819-37de5650be6240cc9f6d28a427357686.tgz
2025-02-07 10:53:40,793 INFO     ___FILE_ONLY___   
2025-02-07 10:53:40,793 INFO     ___FILE_ONLY___ -
2025-02-07 10:53:40,793 INFO     ___FILE_ONLY___        
2025-02-07 10:53:40,793 INFO     ___FILE_ONLY___ QUEUED
2025-02-07 10:53:40,793 INFO     ___FILE_ONLY___ 

2025-02-07 10:53:40,801 DEBUG    root            Metrics reporting process started...
