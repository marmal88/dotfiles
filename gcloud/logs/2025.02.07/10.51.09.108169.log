2025-02-07 10:51:09,159 DEBUG    root            Loaded Command Group: ['gcloud', 'builds']
2025-02-07 10:51:09,197 DEBUG    root            Loaded Command Group: ['gcloud', 'builds', 'submit']
2025-02-07 10:51:09,207 DEBUG    root            Running [gcloud.builds.submit] with arguments: [--async: "True", --config: "./cloudbuild.yaml", --gcs-source-staging-dir: "gs://dde-ops-data-science-p001_cloudbuild/dds-mlflow-gcp-auth", --impersonate-service-account: "cloudbuild-sa@dde-ops-data-science-p001.iam.gserviceaccount.com", --project: "dde-ops-data-science-p001", --region: "europe-west4", SOURCE: "."]
2025-02-07 10:51:09,212 WARNING  root            This command is using service account impersonation. All API calls will be executed as [cloudbuild-sa@dde-ops-data-science-p001.iam.gserviceaccount.com].
2025-02-07 10:51:09,219 DEBUG    google.auth.transport.requests Making request: POST https://oauth2.googleapis.com/token
2025-02-07 10:51:09,224 DEBUG    urllib3.connectionpool Starting new HTTPS connection (1): oauth2.googleapis.com:443
2025-02-07 10:51:09,317 DEBUG    urllib3.connectionpool https://oauth2.googleapis.com:443 "POST /token HTTP/1.1" 200 None
2025-02-07 10:51:09,321 DEBUG    google.auth.transport.requests Making request: POST https://iamcredentials.googleapis.com/v1/projects/-/serviceAccounts/cloudbuild-sa@dde-ops-data-science-p001.iam.gserviceaccount.com:generateAccessToken
2025-02-07 10:51:09,322 DEBUG    urllib3.connectionpool Starting new HTTPS connection (1): iamcredentials.googleapis.com:443
2025-02-07 10:51:09,461 DEBUG    urllib3.connectionpool https://iamcredentials.googleapis.com:443 "POST /v1/projects/-/serviceAccounts/cloudbuild-sa@dde-ops-data-science-p001.iam.gserviceaccount.com:generateAccessToken HTTP/1.1" 200 None
2025-02-07 10:51:09,466 WARNING  root            This command is using service account impersonation. All API calls will be executed as [cloudbuild-sa@dde-ops-data-science-p001.iam.gserviceaccount.com].
2025-02-07 10:51:09,474 DEBUG    google.auth.transport.requests Making request: POST https://oauth2.googleapis.com/token
2025-02-07 10:51:09,476 DEBUG    urllib3.connectionpool Starting new HTTPS connection (1): oauth2.googleapis.com:443
2025-02-07 10:51:09,578 DEBUG    urllib3.connectionpool https://oauth2.googleapis.com:443 "POST /token HTTP/1.1" 200 None
2025-02-07 10:51:09,586 DEBUG    google.auth.transport.requests Making request: POST https://iamcredentials.googleapis.com/v1/projects/-/serviceAccounts/cloudbuild-sa@dde-ops-data-science-p001.iam.gserviceaccount.com:generateAccessToken
2025-02-07 10:51:09,587 DEBUG    urllib3.connectionpool Starting new HTTPS connection (1): iamcredentials.googleapis.com:443
2025-02-07 10:51:09,723 DEBUG    urllib3.connectionpool https://iamcredentials.googleapis.com:443 "POST /v1/projects/-/serviceAccounts/cloudbuild-sa@dde-ops-data-science-p001.iam.gserviceaccount.com:generateAccessToken HTTP/1.1" 200 None
2025-02-07 10:51:09,740 DEBUG    urllib3.connectionpool Starting new HTTPS connection (1): storage.googleapis.com:443
2025-02-07 10:51:11,916 DEBUG    urllib3.connectionpool https://storage.googleapis.com:443 "GET /storage/v1/b/dde-ops-data-science-p001_cloudbuild?alt=json HTTP/1.1" 200 1187
2025-02-07 10:51:11,921 INFO     root            Using default gcloudignore file:
--------------------------------------------------
# This file specifies files that are *not* uploaded to Google Cloud
# using gcloud. It follows the same syntax as .gitignore, with the addition of
# "#!include" directives (which insert the entries of the given .gitignore-style
# file at that point).
#
# For more information, run:
#   $ gcloud topic gcloudignore
#
.gcloudignore
# If you would like to upload your .git directory, .gitignore file or files
# from your .gitignore file, remove the corresponding line
# below:
.git
.gitignore
#!include:.gitignore

--------------------------------------------------
2025-02-07 10:51:11,965 DEBUG    root            Skipping file [.DS_Store]
2025-02-07 10:51:11,967 DEBUG    root            Skipping file [.gitignore]
2025-02-07 10:51:11,971 DEBUG    root            Skipping file [.pytest_cache]
2025-02-07 10:51:11,972 DEBUG    root            Skipping file [.venv]
2025-02-07 10:51:11,973 DEBUG    root            Skipping file [.git]
2025-02-07 10:51:11,979 DEBUG    root            Skipping file [tests/__pycache__/test_mlflow_gcp_auth.cpython-310-pytest-8.2.2.pyc]
2025-02-07 10:51:11,980 DEBUG    root            Skipping file [tests/__pycache__/__init__.cpython-310.pyc]
2025-02-07 10:51:11,984 DEBUG    root            Skipping file [__pycache__/test.cpython-310.pyc]
2025-02-07 10:51:11,989 DEBUG    root            Skipping file [mlflow_gcp_auth/__pycache__/mlflow_gcp_auth.cpython-310.pyc]
2025-02-07 10:51:11,990 DEBUG    root            Skipping file [mlflow_gcp_auth/__pycache__/__init__.cpython-310.pyc]
2025-02-07 10:51:11,990 INFO     ___FILE_ONLY___ Creating temporary archive of 10 file(s) totalling 182.4 KiB before compression.

2025-02-07 10:51:11,996 DEBUG    root            Added dir [tests]
2025-02-07 10:51:11,996 DEBUG    root            Added dir [__pycache__]
2025-02-07 10:51:11,996 DEBUG    root            Added dir [mlflow_gcp_auth]
2025-02-07 10:51:11,997 DEBUG    root            Added dir [tests/__pycache__]
2025-02-07 10:51:11,997 DEBUG    root            Added dir [mlflow_gcp_auth/__pycache__]
2025-02-07 10:51:11,998 DEBUG    root            Added [cloudbuild.yaml]
2025-02-07 10:51:12,016 DEBUG    root            Added [pyproject.toml]
2025-02-07 10:51:12,017 DEBUG    root            Added [build_ci.sh]
2025-02-07 10:51:12,037 DEBUG    root            Added [README.md]
2025-02-07 10:51:12,048 DEBUG    root            Added [deploy.sh]
2025-02-07 10:51:12,062 DEBUG    root            Added [poetry.lock]
2025-02-07 10:51:12,065 DEBUG    root            Added [tests/__init__.py]
2025-02-07 10:51:12,074 DEBUG    root            Added [tests/test_mlflow_gcp_auth.py]
2025-02-07 10:51:12,076 DEBUG    root            Added [mlflow_gcp_auth/__init__.py]
2025-02-07 10:51:12,084 DEBUG    root            Added [mlflow_gcp_auth/mlflow_gcp_auth.py]
2025-02-07 10:51:12,085 INFO     ___FILE_ONLY___ Some files were not included in the source upload.

Check the gcloud log [/Users/daniel.low/.config/gcloud/logs/2025.02.07/10.51.09.108169.log] to see which files and the contents of the
default gcloudignore file used (see `$ gcloud topic gcloudignore` to learn
more).


2025-02-07 10:51:12,085 INFO     ___FILE_ONLY___ Uploading tarball of [.] to [gs://dde-ops-data-science-p001_cloudbuild/dds-mlflow-gcp-auth/1738896669.738739-29ce7319c3584ff48056ee37e60401ed.tgz]

2025-02-07 10:51:12,101 INFO     root            Uploading [/var/folders/cs/p5_dzp410hlgfg_ljwj0jyg00000gp/T/tmpd02n22wi/file.tgz] to [dde-ops-data-science-p001_cloudbuild/dds-mlflow-gcp-auth/1738896669.738739-29ce7319c3584ff48056ee37e60401ed.tgz]
2025-02-07 10:51:12,105 DEBUG    urllib3.connectionpool Starting new HTTPS connection (1): storage.googleapis.com:443
2025-02-07 10:51:14,619 DEBUG    urllib3.connectionpool https://storage.googleapis.com:443 "POST /upload/storage/v1/b/dde-ops-data-science-p001_cloudbuild/o?alt=json&name=dds-mlflow-gcp-auth%2F1738896669.738739-29ce7319c3584ff48056ee37e60401ed.tgz&uploadType=multipart HTTP/1.1" 200 1142
2025-02-07 10:51:14,632 DEBUG    root            submitting build: <Build
 images: []
 logsBucket: 'gs://${PROJECT_ID}_cloudbuild/$_IMAGE_NAME'
 options: <BuildOptions
 dynamicSubstitutions: True
 env: []
 logging: LoggingValueValuesEnum(GCS_ONLY, 2)
 secretEnv: []
 sourceProvenanceHash: []
 volumes: []>
 secrets: []
 source: <Source
 storageSource: <StorageSource
 bucket: 'dde-ops-data-science-p001_cloudbuild'
 generation: 1738896674526772
 object: 'dds-mlflow-gcp-auth/1738896669.738739-29ce7319c3584ff48056ee37e60401ed.tgz'>>
 steps: [<BuildStep
 allowExitCodes: []
 args: ['-c', 'pip install poetry\npoetry install \npoetry run ruff check . --config pyproject.toml\npoetry run ruff format . --check --config pyproject.toml\npoetry run pytest tests\n']
 entrypoint: 'bash'
 env: []
 id: 'InternalCheck'
 name: 'python:3.10.13-slim'
 secretEnv: []
 volumes: []
 waitFor: []>, <BuildStep
 allowExitCodes: []
 args: ['-c', 'pip install poetry \npoetry self add keyrings.google-artifactregistry-auth\npoetry config repositories.dds ${_ARTIFACT_REGISTRY_URL}\nif [[ ${_UPLOAD_FLAG} == \'True\' ]]; then\n  echo "--- Dry-Run ---"\n  if poetry publish --build --repository dds --dry-run; then\n      echo "---- Push to Repo ----"\n      poetry publish --repository dds\n  else\n      echo "Failed to publish to repository"\n  fi\nelse\n  echo "Did not publish as the cloud build was not triggered on main branch."\nfi\n']
 entrypoint: 'bash'
 env: []
 id: 'PublishPackage'
 name: 'python:3.10.13-slim'
 secretEnv: []
 volumes: []
 waitFor: []>]
 substitutions: <SubstitutionsValue
 additionalProperties: [<AdditionalProperty
 key: '_ARTIFACT_REGISTRY_URL'
 value: 'https://${LOCATION}-python.pkg.dev/${PROJECT_ID}/python'>, <AdditionalProperty
 key: '_IMAGE_NAME'
 value: 'mlflow-gcp-auth'>, <AdditionalProperty
 key: '_UPLOAD_FLAG'
 value: 'True'>]>
 tags: []
 warnings: []>
2025-02-07 10:51:14,635 WARNING  root            This command is using service account impersonation. All API calls will be executed as [cloudbuild-sa@dde-ops-data-science-p001.iam.gserviceaccount.com].
2025-02-07 10:51:14,640 DEBUG    google.auth.transport.requests Making request: POST https://oauth2.googleapis.com/token
2025-02-07 10:51:14,642 DEBUG    urllib3.connectionpool Starting new HTTPS connection (1): oauth2.googleapis.com:443
2025-02-07 10:51:14,747 DEBUG    urllib3.connectionpool https://oauth2.googleapis.com:443 "POST /token HTTP/1.1" 200 None
2025-02-07 10:51:14,754 DEBUG    google.auth.transport.requests Making request: POST https://iamcredentials.googleapis.com/v1/projects/-/serviceAccounts/cloudbuild-sa@dde-ops-data-science-p001.iam.gserviceaccount.com:generateAccessToken
2025-02-07 10:51:14,755 DEBUG    urllib3.connectionpool Starting new HTTPS connection (1): iamcredentials.googleapis.com:443
2025-02-07 10:51:14,881 DEBUG    urllib3.connectionpool https://iamcredentials.googleapis.com:443 "POST /v1/projects/-/serviceAccounts/cloudbuild-sa@dde-ops-data-science-p001.iam.gserviceaccount.com:generateAccessToken HTTP/1.1" 200 None
2025-02-07 10:51:14,892 WARNING  root            This command is using service account impersonation. All API calls will be executed as [cloudbuild-sa@dde-ops-data-science-p001.iam.gserviceaccount.com].
2025-02-07 10:51:14,912 DEBUG    google.auth.transport.requests Making request: POST https://oauth2.googleapis.com/token
2025-02-07 10:51:14,914 DEBUG    urllib3.connectionpool Starting new HTTPS connection (1): oauth2.googleapis.com:443
2025-02-07 10:51:15,033 DEBUG    urllib3.connectionpool https://oauth2.googleapis.com:443 "POST /token HTTP/1.1" 200 None
2025-02-07 10:51:15,040 DEBUG    google.auth.transport.requests Making request: POST https://iamcredentials.googleapis.com/v1/projects/-/serviceAccounts/cloudbuild-sa@dde-ops-data-science-p001.iam.gserviceaccount.com:generateAccessToken
2025-02-07 10:51:15,042 DEBUG    urllib3.connectionpool Starting new HTTPS connection (1): iamcredentials.googleapis.com:443
2025-02-07 10:51:15,202 DEBUG    urllib3.connectionpool https://iamcredentials.googleapis.com:443 "POST /v1/projects/-/serviceAccounts/cloudbuild-sa@dde-ops-data-science-p001.iam.gserviceaccount.com:generateAccessToken HTTP/1.1" 200 None
2025-02-07 10:51:15,244 DEBUG    urllib3.connectionpool Starting new HTTPS connection (1): cloudbuild.googleapis.com:443
2025-02-07 10:51:17,241 DEBUG    urllib3.connectionpool https://cloudbuild.googleapis.com:443 "POST /v1/projects/dde-ops-data-science-p001/locations/europe-west4/builds?alt=json HTTP/1.1" 200 None
2025-02-07 10:51:17,251 INFO     ___FILE_ONLY___ Created [https://cloudbuild.googleapis.com/v1/projects/dde-ops-data-science-p001/locations/europe-west4/builds/050597c3-bcda-43ed-b831-ef9e56f50173].

2025-02-07 10:51:17,251 INFO     ___FILE_ONLY___ Logs are available at [ https://console.cloud.google.com/cloud-build/builds;region=europe-west4/050597c3-bcda-43ed-b831-ef9e56f50173?project=699197215593 ].

2025-02-07 10:51:17,252 DEBUG    root            Chosen display Format:
        table(
          id,
          createTime.date('%Y-%m-%dT%H:%M:%S%Oz', undefined='-'),
          duration(start=startTime,end=finishTime,precision=0,calendar=false,undefined="  -").slice(2:).join(""):label=DURATION,
          build_source(undefined="-"):label=SOURCE,
          build_images(undefined="-"):label=IMAGES,
          status
        )
      
2025-02-07 10:51:17,252 INFO     root            Display format: "
        table(
          id,
          createTime.date('%Y-%m-%dT%H:%M:%S%Oz', undefined='-'),
          duration(start=startTime,end=finishTime,precision=0,calendar=false,undefined="  -").slice(2:).join(""):label=DURATION,
          build_source(undefined="-"):label=SOURCE,
          build_images(undefined="-"):label=IMAGES,
          status
        )
      "
2025-02-07 10:51:17,289 INFO     ___FILE_ONLY___ ID
2025-02-07 10:51:17,289 INFO     ___FILE_ONLY___                                     
2025-02-07 10:51:17,289 INFO     ___FILE_ONLY___ CREATE_TIME
2025-02-07 10:51:17,289 INFO     ___FILE_ONLY___                 
2025-02-07 10:51:17,289 INFO     ___FILE_ONLY___ DURATION
2025-02-07 10:51:17,289 INFO     ___FILE_ONLY___   
2025-02-07 10:51:17,289 INFO     ___FILE_ONLY___ SOURCE
2025-02-07 10:51:17,289 INFO     ___FILE_ONLY___                                                                                                                 
2025-02-07 10:51:17,289 INFO     ___FILE_ONLY___ IMAGES
2025-02-07 10:51:17,289 INFO     ___FILE_ONLY___   
2025-02-07 10:51:17,289 INFO     ___FILE_ONLY___ STATUS
2025-02-07 10:51:17,290 INFO     ___FILE_ONLY___ 

2025-02-07 10:51:17,290 INFO     ___FILE_ONLY___ 050597c3-bcda-43ed-b831-ef9e56f50173
2025-02-07 10:51:17,290 INFO     ___FILE_ONLY___   
2025-02-07 10:51:17,290 INFO     ___FILE_ONLY___ 2025-02-07T02:51:16+00:00
2025-02-07 10:51:17,290 INFO     ___FILE_ONLY___   
2025-02-07 10:51:17,290 INFO     ___FILE_ONLY___ -
2025-02-07 10:51:17,290 INFO     ___FILE_ONLY___          
2025-02-07 10:51:17,290 INFO     ___FILE_ONLY___ gs://dde-ops-data-science-p001_cloudbuild/dds-mlflow-gcp-auth/1738896669.738739-29ce7319c3584ff48056ee37e60401ed.tgz
2025-02-07 10:51:17,290 INFO     ___FILE_ONLY___   
2025-02-07 10:51:17,290 INFO     ___FILE_ONLY___ -
2025-02-07 10:51:17,290 INFO     ___FILE_ONLY___        
2025-02-07 10:51:17,290 INFO     ___FILE_ONLY___ QUEUED
2025-02-07 10:51:17,290 INFO     ___FILE_ONLY___ 

2025-02-07 10:51:17,297 DEBUG    root            Metrics reporting process started...
